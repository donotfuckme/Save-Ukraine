<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>БО «МБФ «ВРЯТУВАТИ УКРАЇНУ»</title>

  <link rel="canonical" href="#"/>

  <link rel="shortcut icon" th:href="@{/img/favicon-heart.ico}" type="image/x-icon">

  <link href="https://fonts.googleapis.com/css?family=Open Sans" rel="stylesheet">

  <link th:href="@{/css/style.css}" rel="stylesheet">

</head>

<body>

<div class="wrapper" id="become-volunteer">

  <!-- Header -->
  <th:block th:replace="fragments/header"/>

  <!-- Main menu -->
  <th:block th:replace="fragments/main-menu"/>

  <section class="become-volunteer">
    <div class="become-volunteer__container container">
      <div class="become-volunteer__main-link main-link">
        <a th:href="@{/index#main-page}" class="main-link__anchor">Головна</a>
        <a th:href="@{/help#how-can-help}" class="main-link__subanchor">/ Наші Проєкти</a>
        <p class="main-link__submenu"> / Стати волонтером</p>
      </div>
      <h1 class="how-help__title title">Як стати волонтером?</h1>
      <div class="become-volunteer__content volunteer-content">
        <p class="volunteer-content__text text-parag">
          Наша мрія - жити у мирній, щасливій країні. А країна - це, перш за
          все, люди. Тільки об’єднавшись, допомагаючи один одному ми зможемо приблизити день, коли небо над Україною
          знову буде тихим і мирним.
        </p>
        <p class="volunteer-content__text text-parag">
          Волонтери — це надзвичайні люди. Люди, які за власним бажанням
          інвестують свій час, ресурси та вміння у втілення соціально значимих проєктів: гуманітарна допомога, допомога
          військовим, силам ТрО, допомога у відбудові міст, що постраждали від війни.
        </p>
        <h2 class="subtitle">Завдання волонтера:</h2>
        <ul class="volunteer-content__list">
          <li class="volunteer-content__item">- збір інформації про тих, хто потребує допомоги;</li>
          <li class="volunteer-content__item">- складання списку необхідного;</li>
          <li class="volunteer-content__item">- організація доставки;</li>
          <li class="volunteer-content__item">- надання фото-звіту про виконану роботу.</li>
        </ul>
        <p class="volunteer-content__text text-parag">
          Долучитись до лав волонтерів можуть усі бажаючі. Щоб стати
          частиною волонтерського штабу БФ «Врятувати Україну», заповніть коротку анкету нижче і ми зв’яжемось з Вами
          найближчим часом.
        </p>
      </div>
      <div class="become-volunteer__form volunteer-form">
        <div class="volunteer-form__image">
          <img src="#" th:src="@{/img/become-volunteer.png}" alt="aid" class="image-responsive">
        </div>
        <div class="volunteer-form__body">
          <h2 class="subtitle">Анкета для волонтерів</h2>
          <form class="volunteer-form__form form-volunteer" action="#" th:action="@{/help/become-volunteer}"
                method="post" name="a">
            <div class="form-volunteer__item">
              <label for="txtFullName" class="form-volunteer__title">Ваші ПІБ</label>
              <input id="txtFullName" type="text" name="fullName" class="input-text__custom form-volunteer__input field-input">
              <p class="input-text__error"></p>
            </div>
            <div class="form-volunteer__item">
              <div class="form-volunteer__title">Ваша стать</div>
              <div class="input-radio">
                <div class="input-radio__item">
                  <input id="boolWoman" type="radio" name="female" value="жін" class="input-radio__default">
                  <label for="boolWoman" class="input-radio__custom">жін</label>
                </div>
                <div class="input-radio__item">
                  <input id="boolMan" type="radio" name="male" value="чол" class="input-radio__default">
                  <label for="boolMan" class="input-radio__custom">чол</label>
                </div>
              </div>
            </div>
            <div class="form-volunteer__item">
              <label for="txtCity" class="form-volunteer__title">Місто</label>
              <input id="txtCity" type="text" name="city" class="input-text__custom form-volunteer__input field-input" disabled>
              <p class="input-text__error"></p>
            </div>
            <div class="form-volunteer__item">
              <label for="txtPhone" class="form-volunteer__title">Телефон для зв’язку</label>
              <input id="txtPhone" type="tel" name="phone" class="input-text__custom form-volunteer__input field-input"
                     placeholder="(0XX)XXX XX XX" disabled>
              <p class="input-text__error"></p>
            </div>
            <button type="submit" class="form__btn _btn" id="volunter-btn" disabled>Стати волонтером</button>
          </form>
          <div class="volunteer-form__sending sending-form">
            <div class="sending-form__content">
              <p class="sending-form__text">Дякуємо! Ваша анкета прийнята.</p>
              <p class="sending-form__text">Незабаром ми зв’яжемось з Вами.</p>
            </div>
            <a href="#" class="sending-form__link">Заповнити анкету ще раз</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <th:block th:replace="fragments/footer"/>

</div>

<a class="icon-arrow-right2" href="#" id="scrollToTop"></a>
<script th:src="@{/js/script.js}"></script>

<script>
  // const nameRule = /^[А-Я]{0,1}[а-я]{1,15}( [А-Я]{0,1}[а-я]{1,15}){0,1}$|^[A-Z]{0,1}[a-z]{1,15}( [A-Z]{0,1}[a-z]{1,15}){0,1}$/
  // const cityRule = /^[A-Za-z]{2,150}$/

  const removeErrorMessage = () => {
    const errors = document.querySelectorAll('.input-text__error')

    for (let item of errors) {
      item.innerText = ''
    }
  }

  //Chech field input
  const checkFieldsPresence = (itemInput) => {
    (!itemInput.value) && Object.assign(itemInput.nextElementSibling, {
      innerText: 'Не може бути порожнім'
    })
  }

  const showError = (result, itemInput) => {
    result
      ? Object.assign(itemInput.nextElementSibling, {
        innerText: ''
      })
      : Object.assign(itemInput.nextElementSibling, {
        innerText: 'Невірний формат'
      })
  }

  // const validateName = (itemInput) => {
  //   const nameRule = /^[А-Я]{0,1}[а-я]{1,15}( [А-Я]{0,1}[а-я]{1,15})( [А-Я]{0,1}[а-я]{1,15}){0,1}$/

  //   const result = Boolean(itemInput.value.match(nameRule))

  //   showError(result, itemInput)

  //   checkFieldsPresence(itemInput)
  // }

  // const validateCity = (itemInput) => {
  //   const cityRule = /^[А-Яа-я]{2,15}$/

  //   const result = Boolean(itemInput.value.match(cityRule))

  //   showError(result, itemInput)

  //   checkFieldsPresence(itemInput)
  // }

  // const validateTel = (itemInput) => {
  //   const telephoneRule = /^\(?([0]{1}[3-9]{2})\)?[- ]?([0-9]{3})[- ]?([0-9]{2})[- ]?([0-9]{2})$/

  //   const result = Boolean(itemInput.value.match(telephoneRule))

  //   showError(result, itemInput)

  //   checkFieldsPresence(itemInput)
  // }
  const inputRules = [
    /^[А-Я]{0,1}[а-я]{1,15}( [А-Я]{0,1}[а-я]{1,15})( [А-Я]{0,1}[а-я]{1,15}){0,1}$/,
    /^[А-Яа-я]{2,15}$/,
    /^\(?([0]{1}[3-9]{2})\)?[- ]?([0-9]{3})[- ]?([0-9]{2})[- ]?([0-9]{2})$/
  ]

  const inputName = document.getElementById('input-name')
  const inputCity = document.getElementById('input-city')
  const inputTel = document.getElementById('input-tel')
  const btnBecomeVolunteer = document.getElementById('volunter-btn')

  const validateInputValue = (itemInput, regex) => {
    const result = Boolean(itemInput.value.match(regex))

    showError(result, itemInput)

    checkFieldsPresence(itemInput)

    Object.assign(btnBecomeVolunteer, {
      disabled: !result
    })
  }

// const funcsValidate = [validateName, validateCity, validateTel]

  ;[inputName, inputCity, inputTel]
    .map((item, index) => Object.assign(item, {
      oninput: (event) => validateInputValue(event.target, inputRules[index])
    }))

  const formVolunteer = document.querySelector('.form-volunteer')
  const inputs = document.querySelectorAll('.field-input')

  formVolunteer.addEventListener('submit', function (event) {
    event.preventDefault()
    console.log('clicked on validate')

    removeErrorMessage()

    for (let itemInput of inputs) {
      checkFieldsPresence(itemInput)
    }
  })
  //End Check form volunteer
</script>

</body>

</html>