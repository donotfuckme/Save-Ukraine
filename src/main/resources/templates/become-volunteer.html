<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" th:content="#{volunteer.head.meta.description}"/>

  <title th:text="#{volunteer.head.title}"></title>

  <link rel="canonical" href="http://www.saveukraine.global/help/become-volunteer#become-volunteer"/>
  <link rel="shortcut icon" th:href="@{/img/favicon-heart.ico}" type="image/x-icon">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"/>
  <link rel="stylesheet" href="#" th:href="@{/css/style.css}">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

</head>

<body>

<div class="wrapper" id="become-volunteer">

  <!-- Header -->
  <th:block th:replace="fragments/header"/>

  <!-- Main menu -->
  <th:block th:replace="fragments/main-menu"/>

  <section class="become-volunteer">
    <div class="become-volunteer__container container">
      <div class="become-volunteer__main-link main-link">
        <a th:href="@{/index#main-page}" class="main-link__anchor" th:text="#{volunteer.link.main}"></a>
        <a th:href="@{/help#how-can-help}" class="main-link__subanchor" th:text="#{volunteer.link.projects}"></a>
        <p class="main-link__submenu" th:text="#{volunteer.link.volunteer}"></p>
      </div>
      <h1 class="how-help__title title" th:text="#{volunteer.volunteer.title}"></h1>
      <div class="become-volunteer__content volunteer-content">
        <p class="volunteer-content__text text-parag" th:text="#{volunteer.volunteer.paragraph1}"></p>
        <p class="volunteer-content__text text-parag" th:text="#{volunteer.volunteer.paragraph2}"></p>
        <h2 class="subtitle" th:text="#{volunteer.volunteer.mission.title}"></h2>
        <ul class="volunteer-content__list">
          <li class="volunteer-content__item" th:text="#{volunteer.volunteer.mission.item1}"></li>
          <li class="volunteer-content__item" th:text="#{volunteer.volunteer.mission.item2}"></li>
          <li class="volunteer-content__item" th:text="#{volunteer.volunteer.mission.item3}"></li>
          <li class="volunteer-content__item" th:text="#{volunteer.volunteer.mission.item4}"></li>
        </ul>
        <p class="volunteer-content__text text-parag" th:text="#{volunteer.volunteer.paragraph3}"></p>
      </div>
      <div class="become-volunteer__form volunteer-form">
        <div class="volunteer-form__image">
          <img src="#" th:src="@{/img/become-volunteer.png}" alt="aid" class="image-responsive" loading="lazy">
        </div>
        <div class="volunteer-form__body">
          <h2 class="subtitle" th:text="#{volunteer.volunteer.form.title}"></h2>
          <form class="volunteer-form__form form-volunteer" th:classappend="${param.sent} ? 'form-hidden'" action="#" th:action="@{/help/become-volunteer}"
                method="post" name="a">
            <div class="form-volunteer__item">
              <label for="txtFullName" class="form-volunteer__title" th:text="#{volunteer.volunteer.form.full-name}"></label>
              <input id="txtFullName" type="text" name="fullName" class="input-text__custom form-volunteer__input field-input" th:placeholder="#{volunteer.volunteer.form.full-name.placeholder}">
              <p class="input-text__error"></p>
            </div>
            <div class="form-volunteer__item">
              <div class="form-volunteer__title" th:text="#{volunteer.volunteer.form.gender}"></div>
              <div class="input-radio">
                <div class="input-radio__item">
                  <input id="boolWoman" type="radio" name="female" value="жін" class="input-radio__default">
                  <label for="boolWoman" class="input-radio__custom" th:text="#{volunteer.volunteer.form.gender.female}"></label>
                </div>
                <div class="input-radio__item">
                  <input id="boolMan" type="radio" name="male" value="чол" class="input-radio__default">
                  <label for="boolMan" class="input-radio__custom" th:text="#{volunteer.volunteer.form.gender.male}"></label>
                </div>
              </div>
            </div>
            <div class="form-volunteer__item">
              <label for="txtCity" class="form-volunteer__title" th:text="#{volunteer.volunteer.form.city}"></label>
              <input id="txtCity" type="text" name="city" class="input-text__custom form-volunteer__input field-input"
                     th:placeholder="#{volunteer.volunteer.form.city.placeholder}">
              <p class="input-text__error"></p>
            </div>
            <div class="form-volunteer__item">
              <label for="txtPhone" class="form-volunteer__title" th:text="#{volunteer.volunteer.form.phone}"></label>
              <input id="txtPhone" type="tel" name="phone" class="input-text__custom form-volunteer__input field-input"
                     th:placeholder="#{volunteer.volunteer.form.phone.placeholder}">
              <p class="input-text__error"></p>
            </div>
            <button type="submit" class="form__btn _btn" id="volunter-btn" th:text="#{volunteer.volunteer.form.button}"></button>
          </form>
          <div class="volunteer-form__sending sending-form" th:classappend="${param.sent} ? 'form-sent'">
            <div class="sending-form__content">
              <p class="sending-form__text" th:text="#{volunteer.volunteer.form.send.paragraph1}"></p>
              <p class="sending-form__text" th:text="#{volunteer.volunteer.form.send.paragraph2}"></p>
            </div>
            <a th:href="@{/help/become-volunteer}" class="sending-form__link" th:text="#{volunteer.volunteer.form.send.button}"></a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <th:block th:replace="fragments/footer"/>

</div>

<a class="icon-arrow-right2" href="#" id="scrollToTop"></a>
<script th:src="@{/js/script.js}"></script>

<script>
    //Show form
    const sendingForm = document.querySelector('.sending-form')
    sendingForm.onclick = (event) => {
      sendingForm.classList.remove('form-sent')

      document.querySelector('.form-volunteer').classList.remove('form-hidden')
    }

//Chech field input
const checkFieldsPresence = (itemInput) => {
  (!itemInput.value) && Object.assign(itemInput.nextElementSibling, {
      innerText: 'Не може бути порожнім'
    })
}

const showError = (result, itemInput) => {
  result 
    ? Object.assign(itemInput.nextElementSibling, {
      innerText: ''
    }) 
    : Object.assign(itemInput.nextElementSibling, {
      innerText: 'Невірний формат'
    })
}

const inputRules = [
  /^([А-ЯЁ][а-яё]{2,8}([-][А-ЯЁ][а-яё]{1,8})?(\s[А-ЯЁ][а-яё]{1,8})(\s[А-ЯЁ][а-яё]{2,8})?|[A-Z][a-z]{2,8}([-,'][A-Z][a-z]{2,8})?(\s[A-Z][a-z]{2,8})(\s[A-Z][a-z]{2,8})?|[А-ЯІЇҐЄ][а-яіїґє\']{2,10}([-][А-ЯІЇҐЄ][а-яіїґє\']{2,10})?(\s[А-ЯІЇҐЄ][а-яіїґє\']{2,10})(\s[А-ЯІЇҐЄ][а-яіїґє\']{2,10})?)$/,
  /^([А-ЯЁ][а-яё]{2,10}([-][А-ЯЁ][а-яё]{2,10})?(\s[А-ЯЁ][а-яё]{2,8})?|[A-Z][a-z]{2,10}([-][A-Z][a-z]{2,10})?(\s[A-Z][a-z]{2,8})?|[А-ЯІЇҐЄ][а-яіїґє\']{2,10}([-][А-ЯІЇҐЄ][а-яіїґє\']{2,10})?(\s[А-ЯІЇҐЄ][а-яіїґє\']{2,10})?)$/,
  /^([+][1-9]{2})?[(-\s]?([0-9]{3})[)-\s]?([0-9]{3})[-\s]?([0-9]{2})[-\s]?([0-9]{2})$/
]

const validateInputValue = (itemInput, regex) => {
  const result = Boolean(itemInput.value.match(regex))

  showError(result, itemInput)

  checkFieldsPresence(itemInput)
}

const formVolunteer = document.querySelector('.form-volunteer')
const inputs = document.querySelectorAll('.field-input')

inputs.forEach((input, index) => Object.assign(input, {
    oninput: (event) => validateInputValue(event.target, inputRules[index])
  }))
</script>

</body>

</html>