<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Додавати звіт</title>

  <link rel="shortcut icon" th:href="@{/img/favicon-heart.ico}" type="image/x-icon">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <link th:href="@{/css/style.css}" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

</head>

<body>

<div class="wrapper">

  <!-- Header -->
  <th:block th:replace="fragments/header"/>

  <!-- Main menu -->
  <th:block th:replace="fragments/main-menu"/>
  <div class="container">
    <h1 class="title">Форма створення звіту</h1>

    <form name="reportDto" th:action="@{/management/reports/add}" method="post" enctype="multipart/form-data">
      <div class="form-group">
        <label for="txtTitle">Заголовок</label>
        <input type="text" id="txtTitle" name="title" placeholder="Заголовок" class="input-text__custom">
      <!-- </div> -->

      <div class="form-group">
        <p class="label-style">Зображення:</p>
        <input type="file" id="txtImages" accept="image/jpg images/png" name="images" multiple>
        <label for="txtImages" class="btn btn-tertiary label-file">
          <i class="icon fa fa-check"></i>
          <span class="file-name">Завантажити зображення</span>
        </label>
      </div>

      <div id="file-container"></div>

      <div class="form-group">
        <label for="txtDescription">Опис</label>
        <input type="text" id="txtDescription" name="description" placeholder="Опис" class="input-text__custom">
      </div>

      <div class="btn-group" role="group">
        <div class="form-actions">
          <button type="submit" class="_btn">Додати</button>
        </div>
      </div>
    </form>
  </div>

</div>

<script>
  const inputFile = document.getElementById('txtImages')
  const containerFiles = document.getElementById('file-container')

  inputFile.onchange = (event) => {
    const listFiles = event.target.files

    for (let file of listFiles) {
      let elemContainer = document.createElement('div')

      elemContainer.innerHTML = `
        <div class="container-item">
          <p class="file-item">${file.name} <span>${Math.round(file.size/1000)}kB</span></p>
           <p class="delete-file"></p>
        </div>
      `
      containerFiles.appendChild(elemContainer)
    }

    const buttonsDeleteFile = document.querySelectorAll('.delete-file')
    const itemsContainer = document.querySelectorAll('.container-item')

    buttonsDeleteFile.forEach((item, index) => {
      item.onclick = (event) => {
        itemsContainer[index].remove()
      }
    })
  }
</script>
<script th:src="@{/js/script.js}"></script>

</body>

</html>